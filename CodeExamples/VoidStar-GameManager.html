<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">using</span> <span style="color: #0e84b5; font-weight: bold">UnityEngine</span>;
<span style="color: #008800; font-weight: bold">using</span> <span style="color: #0e84b5; font-weight: bold">UnityEngine.SceneManagement</span>;

<span style="color: #888888">//To be attached to an object named #GameManager, There should only ever be one of these</span>
<span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">GameManager</span> : MonoBehaviour {

    <span style="color: #888888">//editor list of all ship customisation parts</span>
    <span style="color: #008800; font-weight: bold">public</span> GameObject[] EngineItemList;
    <span style="color: #008800; font-weight: bold">public</span> GameObject[] WeaponItemList;
    <span style="color: #008800; font-weight: bold">public</span> GameObject[] EquipItemList;
    <span style="color: #008800; font-weight: bold">public</span> GameObject[] HullList;

    <span style="color: #888888">//editor list of all spawn locations for different teams</span>
    <span style="color: #008800; font-weight: bold">public</span> Transform[] Player1Spawns;
    <span style="color: #008800; font-weight: bold">public</span> Transform[] Player2Spawns;
    <span style="color: #008800; font-weight: bold">public</span> Transform[] AISpawns;

    <span style="color: #888888">//list of customisation parts unlocked by the player</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">int</span>[] unlockedHulls;
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">int</span>[] unlockedEngines;
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">int</span>[] unlockedWeapons;
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">int</span>[] unlockedEquips;

    <span style="color: #888888">//boolean to indicate whether the game is currently running</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">bool</span> hasStarted = <span style="color: #008800; font-weight: bold">false</span>;

    <span style="color: #888888">//float to decide the difficulty of the game, affecting score and spawn rate</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">float</span> difficultyModifier = <span style="color: #6600EE; font-weight: bold">1f</span>;

    <span style="color: #008800; font-weight: bold">public</span> UnityEngine.UI.Slider DifficultySlider;

    <span style="color: #888888">//used by a slider bar to set the difficulty when it gets changed</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setDifficulty</span>() {
        difficultyModifier = DifficultySlider.<span style="color: #008800; font-weight: bold">value</span>;
    }
    <span style="color: #888888">//used to set the slider bar to the difficulty when it gets changed</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setSlider</span>(<span style="color: #333399; font-weight: bold">float</span> <span style="color: #008800; font-weight: bold">value</span>) {
        DifficultySlider.<span style="color: #008800; font-weight: bold">value</span> = <span style="color: #008800; font-weight: bold">value</span>;
    }

    <span style="color: #888888">//returns vector3 position for a spawn location decided randomly from the lists</span>
    <span style="color: #008800; font-weight: bold">public</span> Vector3 <span style="color: #0066BB; font-weight: bold">getSpawn</span>(<span style="color: #333399; font-weight: bold">int</span> teamNumber) {
        <span style="color: #008800; font-weight: bold">if</span> (teamNumber == <span style="color: #6600EE; font-weight: bold">1</span>) {<span style="color: #888888">//player team 1 spawns</span>
            <span style="color: #008800; font-weight: bold">return</span> Player1Spawns[Random.Range(<span style="color: #6600EE; font-weight: bold">0</span>, Player1Spawns.Length)].position;
        } <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span> (teamNumber == <span style="color: #6600EE; font-weight: bold">2</span>) {<span style="color: #888888">//player team 2 spawns</span>
            <span style="color: #008800; font-weight: bold">return</span> Player2Spawns[Random.Range(<span style="color: #6600EE; font-weight: bold">0</span>, Player2Spawns.Length)].position;
        } <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span> (teamNumber == <span style="color: #6600EE; font-weight: bold">0</span>) {<span style="color: #888888">//Co-op Vs AI bot spawns</span>
            <span style="color: #008800; font-weight: bold">return</span> AISpawns[Random.Range(<span style="color: #6600EE; font-weight: bold">0</span>, AISpawns.Length)].position;
        } <span style="color: #008800; font-weight: bold">else</span> {<span style="color: #888888">//invalid team number</span>
            <span style="color: #008800; font-weight: bold">return</span> Vector3.zero;
        }
    }

    <span style="color: #888888">//loads the currently loaded scene again</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">reloadScene</span>() {
        SceneManager.LoadScene(SceneManager.GetActiveScene().buildIndex);
    }

    <span style="color: #888888">//Uses PlayerPrefs to load ship config, returns setup array</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">int</span>[] <span style="color: #0066BB; font-weight: bold">LoadLastSetup</span>() {
        <span style="color: #333399; font-weight: bold">int</span>[] arr = <span style="color: #008800; font-weight: bold">new</span> <span style="color: #333399; font-weight: bold">int</span>[<span style="color: #6600EE; font-weight: bold">10</span>];
        <span style="color: #333399; font-weight: bold">string</span> str;
        <span style="color: #333399; font-weight: bold">string</span>[] strarr;

        <span style="color: #888888">//if there is no saved config, create one, otherwise load it</span>
        <span style="color: #008800; font-weight: bold">if</span> (PlayerPrefs.HasKey(<span style="background-color: #fff0f0">&quot;setupstr&quot;</span>)) {
            str = PlayerPrefs.GetString(<span style="background-color: #fff0f0">&quot;setupstr&quot;</span>);
        } <span style="color: #008800; font-weight: bold">else</span> {
            str = <span style="background-color: #fff0f0">&quot;0,0,0,0,0,0,0,0,0,0&quot;</span>;<span style="color: #888888">//hull, engine, equip1, 2, 3, 4, weapon1, 2, 3, 4</span>
        }

        <span style="color: #888888">//turn config string into setup array</span>
        strarr = str.Split(<span style="background-color: #fff0f0">&quot;,&quot;</span>[<span style="color: #6600EE; font-weight: bold">0</span>]);
        <span style="color: #008800; font-weight: bold">for</span>(<span style="color: #333399; font-weight: bold">int</span> i=<span style="color: #6600EE; font-weight: bold">0</span>;i&lt;<span style="color: #6600EE; font-weight: bold">10</span>;i++) {
            <span style="color: #008800; font-weight: bold">try</span> {
                arr[i] = <span style="color: #333399; font-weight: bold">int</span>.Parse(strarr[i]);
            } <span style="color: #008800; font-weight: bold">catch</span>{
                arr[i] = <span style="color: #6600EE; font-weight: bold">0</span>;
            }
        }
       <span style="color: #008800; font-weight: bold">return</span> arr;
    }

    <span style="color: #888888">//Uses PlayerPrefs to load game difficulty (DC = Difficulty Check)</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">float</span> <span style="color: #0066BB; font-weight: bold">LoadLastDC</span>() {
        <span style="color: #333399; font-weight: bold">float</span> dc;
        <span style="color: #008800; font-weight: bold">if</span> (PlayerPrefs.HasKey(<span style="background-color: #fff0f0">&quot;dcfloat&quot;</span>)) {
            dc = PlayerPrefs.GetFloat(<span style="background-color: #fff0f0">&quot;dcfloat&quot;</span>);
        }<span style="color: #008800; font-weight: bold">else</span> {
            dc = <span style="color: #6600EE; font-weight: bold">1</span>;
        }
        <span style="color: #008800; font-weight: bold">return</span> dc;
    }

    <span style="color: #888888">//Saves current ship config to PlayerPrefs</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">SaveLastSetup</span>(<span style="color: #333399; font-weight: bold">int</span>[] arr) {
        <span style="color: #333399; font-weight: bold">string</span> str = <span style="background-color: #fff0f0">&quot;&quot;</span>;

        <span style="color: #888888">//turns setup array into config string</span>
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i = <span style="color: #6600EE; font-weight: bold">0</span>; i &lt; <span style="color: #6600EE; font-weight: bold">10</span>; i++) {
            str = str + arr[i] + <span style="background-color: #fff0f0">&quot;,&quot;</span>;
        }
        PlayerPrefs.SetString(<span style="background-color: #fff0f0">&quot;setupstr&quot;</span>, str);
    }

    <span style="color: #888888">//Saves current game difficulty to PlayerPrefs</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">SaveLastDC</span>(<span style="color: #333399; font-weight: bold">float</span> dc) {
        PlayerPrefs.SetFloat(<span style="background-color: #fff0f0">&quot;dcfloat&quot;</span>, dc);
    }


}
</pre></div>
